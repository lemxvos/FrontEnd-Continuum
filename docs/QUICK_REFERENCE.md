# CONTINUUM FRONTEND - RESUMO EXECUTIVO\n\n**VersÃ£o:** 1.0  \n**Data:** Fevereiro 2026  \n**Engenheiro:** Senior Frontend   \n\n---\n\n## ğŸ¯ PRINCÃPIO\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                                                               â•‘\nâ•‘          Frontend Ã© BURRO    Backend Ã© CÃ‰REBRO              â•‘\nâ•‘                                                               â•‘\nâ•‘  Frontend                     Backend                         â•‘\nâ•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€                        â•‘\nâ•‘  â€¢ Envia texto              â€¢ Parseia menÃ§Ãµes                  â•‘\nâ•‘  â€¢ Renderiza                  â€¢ Valida entidades             â•‘\nâ•‘  â€¢ Gerencia UX              â€¢ Calcula Ã­ndices                 â•‘\nâ•‘  â€¢ Cache local              â€¢ Atualiza Ã­ndices               â•‘\nâ•‘  â€¢ Display                   â€¢ Processa semÃ¢ntica            â•‘\nâ•‘                                                               â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n---\n\n## ğŸ“ ESTRUTURA \n\n```\nsrc/\nâ”œâ”€â”€ types/\nâ”‚   â””â”€â”€ models.ts                # âœ… Contrato com backend\nâ”‚\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ noteService.ts           # âœ… HTTP /api/notes\nâ”‚   â””â”€â”€ entityService.ts         # âœ… HTTP /api/entities\nâ”‚\nâ”œâ”€â”€ stores/\nâ”‚   â”œâ”€â”€ noteStore.ts             # âœ… Estado de notas\nâ”‚   â”œâ”€â”€ entityStore.ts           # âœ… Estado de entidades\nâ”‚   â””â”€â”€ authStore.ts             # âœ… Auth (jÃ¡ existe)\nâ”‚\nâ”œâ”€â”€ hooks/\nâ”‚   â”œâ”€â”€ useMentions.ts           # âœ… LÃ³gica de menÃ§Ãµes\nâ”‚   â””â”€â”€ use-mobile.tsx           # âœ… (jÃ¡ existe)\nâ”‚\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ EntityBadge.tsx          # âœ… Renderiza entidade\nâ”‚   â”œâ”€â”€ EntitySelector.tsx       # âœ… Autocomplete\nâ”‚   â”œâ”€â”€ MentionDisplay.tsx       # âœ… Renderiza menÃ§Ãµes\nâ”‚   â”œâ”€â”€ JournalEditor.tsx        # âœ… Editor completo\nâ”‚   â””â”€â”€ ... (outros)\nâ”‚\nâ””â”€â”€ pages/\n    â”œâ”€â”€ Journal.tsx              # Lista de notas\n    â”œâ”€â”€ JournalEditor.tsx        # Editor\n    â”œâ”€â”€ Entities.tsx             # Lista de entidades\n    â””â”€â”€ ... (outras pÃ¡ginas)\n```\n\n---\n\n## ğŸ”„ FLUXO DE UMA NOTA\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ USUÃRIO DIGITA EM EDITOR                                â”‚\nâ”‚ \"SaÃ­ com {person:ent_8f2a}\"                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ useMentionAutocompleteState() DETECTA PADRÃƒO             â”‚\nâ”‚ trigger: \"{\" | query: \"pe\" | position: 8                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ EntitySelector MOSTRA DROPDOWN                           â”‚\nâ”‚ entityService.autocomplete(\"pe\")                         â”‚\nâ”‚ â†’ GET /api/entities/search?q=pe                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ BACKEND RETORNA                                         â”‚\nâ”‚ [{ id: \"ent_8f2a\", name: \"Pessoa\", ... }]             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ USUÃRIO SELECIONA                                       â”‚\nâ”‚ handleEntitySelect(entity)                              â”‚\nâ”‚ â†’ Insere {person:ent_8f2a}                              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ MentionDisplay RENDERIZA PREVIEW                         â”‚\nâ”‚ \"SaÃ­ com [ğŸ‘© Pessoa]\"                                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ USUÃRIO CLICA SALVAR                                    â”‚\nâ”‚ noteStore.create({ title, content, folderPath })       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ noteService.create()                                    â”‚\nâ”‚ â†’ POST /api/notes                                       â”‚\nâ”‚ Body: { title, content, folderPath }                    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ BACKEND PROCESSA ğŸ§                                      â”‚\nâ”‚ 1. Parseia {person:ent_8f2a}                            â”‚\nâ”‚ 2. Valida se existe                                     â”‚\nâ”‚ 3. Busca Entity                                         â”‚\nâ”‚ 4. Atualiza Ã­ndices                                     â”‚\nâ”‚ 5. Retorna Note com entities[]                          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ FRONTEND RECEBE                                         â”‚\nâ”‚ {                                                       â”‚\nâ”‚   id: \"note_abc\",                                      â”‚\nâ”‚   content: \"SaÃ­ com {person:ent_8f2a}\",                â”‚\nâ”‚   entities: [{id, type, name, icon, color}],            â”‚\nâ”‚   ...                                                   â”‚\nâ”‚ }                                                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ STORE SINCRONIZA                                        â”‚\nâ”‚ useNoteStore.notes += [newNote]                        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ UI RE-RENDERIZA                                         â”‚\nâ”‚ Lista de notas mostra com badges                        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ¨ COMPONENTES\n\n### EntityBadge\n```tsx\n<EntityBadge entity={entity} onClick={...} />\n// Renderiza: [ğŸ‘© Emilly] com cor\n```\n\n### EntitySelector  \n```tsx\n<EntitySelector isOpen={true} onSelect={(entity) => ...} />\n// Dropdown com autocomplete\n```\n\n### MentionDisplay\n```tsx\n<MentionDisplay \n  content=\"SaÃ­ com {person:ent_8f2a}\"\n  entities={[...]}\n/>\n// Renderiza com badges\n```\n\n### JournalEditor\n```tsx\n<JournalEditor \n  noteId={optional}\n  onSaveSuccess={(note) => ...}\n/>\n// Editor completo com preview\n```\n\n---\n\n## ğŸ“¦ STORES (Zustand)\n\n### useNoteStore\n```typescript\nconst {\n  notes,           // Array de notas\n  currentNote,     // Nota sendo editada\n  isLoading,\n  error,\n  \n  fetchList(opts),      // GET /api/notes\n  fetchOne(id),         // GET /api/notes/:id\n  search(opts),         // GET /api/notes/search\n  create(payload),      // POST /api/notes\n  update(id, payload),  // PUT /api/notes/:id\n  delete(id),           // DELETE /api/notes/:id\n} = useNoteStore();\n```\n\n### useEntityStore\n```typescript\nconst {\n  entities,           // Array de entidades\n  lastSearchResults,  // Resultado do autocomplete\n  isLoading,\n  error,\n  \n  fetch(),                    // GET /api/entities\n  fetchByType(type),          // GET /api/entities/type/:type\n  search(query, type?),       // GET /api/entities/search\n  create(payload),            // POST /api/entities\n  update(id, payload),        // PATCH /api/entities/:id\n  delete(id),                 // DELETE /api/entities/:id\n  getOne(id),                 // Busca local\n} = useEntityStore();\n```\n\n---\n\n## ğŸª HOOKS\n\n### useMentionTokens\n```typescript\nconst tokens = useMentionTokens(\"SaÃ­ com {person:ent_8f2a}\");\n// [\n//   { type: \"text\", value: \"SaÃ­ com \" },\n//   { type: \"mention\", entity: { type: \"person\", id: \"ent_8f2a\" } }\n// ]\n```\n\n### useMentionedEntityReferences\n```typescript\nconst refs = useMentionedEntityReferences(content);\n// [{ type: \"person\", id: \"ent_8f2a\" }]\n```\n\n### useMentionAutocompleteState\n```typescript\nconst state = useMentionAutocompleteState(text, cursor);\n// { trigger: \"{\", query: \"pe\", position: 8 } | null\n```\n\n### useMentionCount\n```typescript\nconst count = useMentionCount(content);\n// 2\n```\n\n### Helper Functions\n```typescript\nformatMention(\"person\", \"ent_8f2a\")        // \"{person:ent_8f2a}\"\ninsertMentionAtPosition(text, pos, ...)    // insere menÃ§Ã£o\nisValidMentionFormat(\"{person:ent_8f2a}\") // true\n```\n\n---\n\n## ğŸ“¡ CONTRATO COM BACKEND\n\n### POST /api/notes\n```json\nRequest:\n{\n  \"title\": \"Hoje\",\n  \"content\": \"SaÃ­ com {person:ent_8f2a}\",\n  \"folderPath\": \"vida/amigos\"\n}\n\nResponse:\n{\n  \"id\": \"note_abc\",\n  \"title\": \"Hoje\",\n  \"content\": \"SaÃ­ com {person:ent_8f2a}\",\n  \"entities\": [\n    { \"id\": \"ent_8f2a\", \"type\": \"person\", \"name\": \"Emilly\", ... }\n  ],\n  \"createdAt\": \"2026-02-18T...\"\n}\n```\n\n### PUT /api/notes/:id\n```json\nMesmos payloads que POST\nBackend recalcula tudo\n```\n\n### DELETE /api/notes/:id\n```json\nBackend remove e ajusta Ã­ndices\n```\n\n### GET /api/entities/search?q=pe&limit=10\n```json\nResponse:\n[\n  { \"id\": \"ent_8f2a\", \"type\": \"person\", \"name\": \"Pessoa X\", ... }\n]\n```\n\n---\n\n## âœ… CHECKLIST\n\n- [x] Types definidos (models.ts)\n- [x] Services criados (noteService, entityService)\n- [x] Stores criados (noteStore, entityStore)\n- [x] Hooks criados (useMentions)\n- [x] Componentes criados (EntityBadge, EntitySelector, MentionDisplay, JournalEditor)\n- [x] DocumentaÃ§Ã£o (ARCHITECTURE.md)\n- [x] Exemplos (INTEGRATION_EXAMPLES.tsx)\n- [ ] Conectar Pages (Journal, JournalEditor, Entities)\n- [ ] Testes unitÃ¡rios\n- [ ] IntegraÃ§Ã£o com backend real\n- [ ] Error handling completo\n- [ ] Loading states em todos os lugares\n\n---\n\n## ğŸš€ PRÃ“XIMOS PASSOS\n\n1. **Conectar as Pages**\n   ```tsx\n   // pages/Journal.tsx\n   export default function Journal() {\n     return <JournalListPageExample />;\n   }\n   ```\n\n2. **Implementar EntitySelector com textarea**\n   - Detectar autocomplete\n   - Abrir dropdown na posiÃ§Ã£o correta\n   - Inserir menÃ§Ã£o ao clicar\n\n3. **Tests**\n   ```bash\n   npm run test\n   ```\n\n4. **Deploy**\n   ```bash\n   npm run build\n   ```\n\n---\n\n## ğŸ“š REFERÃŠNCIAS\n\n- [docs/ARCHITECTURE.md](./ARCHITECTURE.md) - DocumentaÃ§Ã£o completa\n- [docs/INTEGRATION_EXAMPLES.tsx](./INTEGRATION_EXAMPLES.tsx) - Exemplos de integraÃ§Ã£o\n- [src/types/models.ts](../src/types/models.ts) - Types\n- [src/services/](../src/services/) - Services\n- [src/stores/](../src/stores/) - Stores\n- [src/hooks/useMentions.ts](../src/hooks/useMentions.ts) - Hooks\n- [src/components/](../src/components/) - Componentes\n\n---\n\n## ğŸ“ REGRA DE OURO\n\n```python\nif question == \"Quem faz isso?\":\n    if action in [\"parsear\", \"validar\", \"calcular\", \"indexar\"]:\n        answer = \"BACKEND\"\n    elif action in [\"renderizar\", \"enviar\", \"exibir\"]:\n        answer = \"FRONTEND\"\n    else:\n        answer = \"Discuta com o time\"\n```\n\n---\n\n## ğŸ’¬ SUPORTE\n\n**DÃºvida:** \"O frontend deve validar menÃ§Ã£o?\"\n**Resposta:** NÃ£o. Backend valida. Frontend apenas envia.\n\n**DÃºvida:** \"E se backend retornar erro?\"\n**Resposta:** Exiba mensagem clara. Nunca tente corrigir.\n\n**DÃºvida:** \"Frontend pode calcular contagem de menÃ§Ãµes?\"\n**Resposta:** Para DISPLAY apenas (UI). Para significado semÃ¢ntico, backend.\n\n---\n\n**Criado por:** Engenheiro Frontend SÃªnior  \n**Status:** âœ… Pronto para implementaÃ§Ã£o\n"